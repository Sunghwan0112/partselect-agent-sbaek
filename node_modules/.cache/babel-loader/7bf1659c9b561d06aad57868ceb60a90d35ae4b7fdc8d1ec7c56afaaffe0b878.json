{"ast":null,"code":"import _regeneratorRuntime from\"/home/steve/Desktop/Instalily/partselect-chat-agent-sbaek/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/steve/Desktop/Instalily/partselect-chat-agent-sbaek/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/steve/Desktop/Instalily/partselect-chat-agent-sbaek/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/steve/Desktop/Instalily/partselect-chat-agent-sbaek/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from\"react\";import ReactMarkdown from\"react-markdown\";import{getAIMessage}from\"../api/api\";import\"./ChatWindow.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialOptions=[\"Check Order Status\",\"Return an Order\",\"Cancel an Order\",\"Search for a refrigerator part\",\"Search for a dishwasher part\",\"Is this part compatible with my model?\",\"How do I install a replacement part?\"];function ChatWindow(){var _useState=useState([{role:\"assistant\",content:\"Hello! I'm here to help with any questions you have about refrigerator or dishwasher parts. Let me know what you need assistance with!\\n\\nIf you're looking for repair help, check out these official repair guides:\\n\\n- [Refrigerator](https://www.partselect.com/Repair/Refrigerator/)\\n- [Dishwasher](https://www.partselect.com/Repair/Dishwasher/)\"}]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),buttonsVisible=_useState6[0],setButtonsVisible=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),thinking=_useState8[0],setThinking=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),hasInteracted=_useState10[0],setHasInteracted=_useState10[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){if(hasInteracted){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});}};useEffect(function(){scrollToBottom();},[messages]);var handleSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(text){var userMessage,aiResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:userMessage={role:\"user\",content:text};setMessages(function(prev){return[].concat(_toConsumableArray(prev),[userMessage]);});setHasInteracted(true);if(buttonsVisible)setButtonsVisible(false);setThinking(true);_context.next=7;return getAIMessage(text);case 7:aiResponse=_context.sent;setMessages(function(prev){return[].concat(_toConsumableArray(prev),[aiResponse]);});setInput(\"\");setThinking(false);case 11:case\"end\":return _context.stop();}},_callee);}));return function handleSend(_x){return _ref.apply(this,arguments);};}();var handleQuickAction=function handleQuickAction(actionText){handleSend(actionText);};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map(function(msg,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(msg.role,\"-message\"),children:/*#__PURE__*/_jsx(ReactMarkdown,{components:{a:function a(props){return/*#__PURE__*/_jsx(\"a\",{href:props.href,target:\"_blank\",rel:\"noopener noreferrer\",children:props.children});}},children:msg.content})},idx);}),thinking&&/*#__PURE__*/_jsx(\"div\",{className:\"assistant-message-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"assistant-message thinking-placeholder\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"robot-thinking\",children:[\"\\uD83E\\uDD16\",/*#__PURE__*/_jsxs(\"div\",{className:\"typing-dots\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),buttonsVisible&&/*#__PURE__*/_jsx(\"div\",{className:\"quick-actions\",children:initialOptions.map(function(text,idx){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleQuickAction(text);},children:text},idx);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:function onChange(e){return setInput(e.target.value);},onKeyDown:function onKeyDown(e){return e.key===\"Enter\"&&input.trim()&&handleSend(input);},placeholder:\"Type your question...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSend(input);},disabled:!input.trim(),children:\"Send\"})]})]});}export default ChatWindow;","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactMarkdown","getAIMessage","jsx","_jsx","jsxs","_jsxs","initialOptions","ChatWindow","_useState","role","content","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","input","setInput","_useState5","_useState6","buttonsVisible","setButtonsVisible","_useState7","_useState8","thinking","setThinking","_useState9","_useState10","hasInteracted","setHasInteracted","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","text","userMessage","aiResponse","wrap","_callee$","_context","prev","next","concat","_toConsumableArray","sent","stop","_x","apply","arguments","handleQuickAction","actionText","className","children","map","msg","idx","components","a","props","href","target","rel","ref","onClick","type","value","onChange","e","onKeyDown","key","trim","placeholder","disabled"],"sources":["/home/steve/Desktop/Instalily/partselect-chat-agent-sbaek/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { getAIMessage } from \"../api/api\";\nimport \"./ChatWindow.css\";\n\nconst initialOptions = [\n  \"Check Order Status\",\n  \"Return an Order\",\n  \"Cancel an Order\",\n  \"Search for a refrigerator part\",\n  \"Search for a dishwasher part\",\n  \"Is this part compatible with my model?\",\n  \"How do I install a replacement part?\"\n];\n\nfunction ChatWindow() {\n  const [messages, setMessages] = useState([\n    {\n      role: \"assistant\",\n      content:\n        \"Hello! I'm here to help with any questions you have about refrigerator or dishwasher parts. Let me know what you need assistance with!\\n\\nIf you're looking for repair help, check out these official repair guides:\\n\\n- [Refrigerator](https://www.partselect.com/Repair/Refrigerator/)\\n- [Dishwasher](https://www.partselect.com/Repair/Dishwasher/)\"\n    }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [buttonsVisible, setButtonsVisible] = useState(true);\n  const [thinking, setThinking] = useState(false);\n  const [hasInteracted, setHasInteracted] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    if (hasInteracted) {\n      messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSend = async (text) => {\n    const userMessage = { role: \"user\", content: text };\n    setMessages((prev) => [...prev, userMessage]);\n    setHasInteracted(true);\n    if (buttonsVisible) setButtonsVisible(false);\n    setThinking(true);\n\n    const aiResponse = await getAIMessage(text);\n    setMessages((prev) => [...prev, aiResponse]);\n    setInput(\"\");\n    setThinking(false);\n  };\n\n  const handleQuickAction = (actionText) => {\n    handleSend(actionText);\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"messages-container\">\n        {messages.map((msg, idx) => (\n          <div key={idx} className={`${msg.role}-message`}>\n            <ReactMarkdown\n              components={{\n                a: (props) => (\n                  <a href={props.href} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {props.children}\n                  </a>\n                ),\n              }}\n            >\n              {msg.content}\n            </ReactMarkdown>\n          </div>\n        ))}\n\n        {thinking && (\n          <div className=\"assistant-message-container\">\n            <div className=\"assistant-message thinking-placeholder\">\n              <div className=\"robot-thinking\">\n                ðŸ¤–\n                <div className=\"typing-dots\">\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {buttonsVisible && (\n        <div className=\"quick-actions\">\n          {initialOptions.map((text, idx) => (\n            <button key={idx} onClick={() => handleQuickAction(text)}>\n              {text}\n            </button>\n          ))}\n        </div>\n      )}\n\n      <div className=\"input-area\">\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={(e) => e.key === \"Enter\" && input.trim() && handleSend(input)}\n          placeholder=\"Type your question...\"\n        />\n        <button onClick={() => handleSend(input)} disabled={!input.trim()}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatWindow;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}